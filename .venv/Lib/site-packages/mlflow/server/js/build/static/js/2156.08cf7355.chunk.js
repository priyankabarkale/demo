"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[2156],{7306:function(e,t,a){a.d(t,{_:function(){return g},n:function(){return p}});var n=a(82716),r=a(27757),o=a(79081),s=a(46709),l=a(77680),i=a(7655),d=a(40724),c=a(24523),u=a(73408);var m={name:"mfyowb",styles:"border:0;background:none;padding:0;line-height:0;cursor:pointer"};const g=({exampleEntityName:e="my_model_name"})=>{const{formatMessage:t}=(0,i.A)(),a=(0,l.zR)({id:"wMG8+P",defaultMessage:"To search by tags or by names and tags, use a simplified version{newline}of the SQL {whereBold} clause."}),n=t(a,{newline:" ",whereBold:"WHERE"});return(0,u.FD)(r.aw.Root,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_46",children:[(0,u.Y)(r.aw.Trigger,{"aria-label":n,css:m,children:(0,u.Y)(o.I,{})}),(0,u.FD)(r.aw.Content,{align:"start",children:[(0,u.FD)("div",{children:[(0,u.Y)(d.A,{...a,values:{newline:(0,u.Y)("br",{}),whereBold:(0,u.Y)("b",{children:"WHERE"})}})," ",(0,u.Y)(d.A,{id:"3bagxW",defaultMessage:"<link>Learn more</link>",values:{link:e=>(0,u.Y)(r.T.Link,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_61",href:c.Lm+"#syntax",openInNewTab:!0,children:e})}}),(0,u.Y)("br",{}),(0,u.Y)("br",{}),(0,u.Y)(d.A,{id:"U3btBc",defaultMessage:"Examples:"}),(0,u.Y)("br",{}),'\u2022 tags.my_key = "my_value"',(0,u.Y)("br",{}),'\u2022 name ILIKE "%',e,'%" AND tags.my_key = "my_value"']}),(0,u.Y)(r.aw.Arrow,{})]})]})},p=({searchFilter:e,onSearchFilterChange:t,isFiltered:a})=>{const o=(0,i.A)(),[l,c]=(0,s.useState)(e);(0,s.useEffect)(()=>{c(e)},[e]);return(0,u.FD)(n.TableFilterLayout,{children:[(0,u.Y)(n.TableFilterInput,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_118",placeholder:o.formatMessage({id:"6Nk5AH",defaultMessage:"Filter registered models by name or tags"}),onSubmit:()=>{t(l)},onClear:()=>{c(""),t("")},onChange:e=>c(e.target.value),"data-testid":"model-search-input",suffix:(0,u.Y)(g,{}),value:l,showSearchButton:!0}),a&&(0,u.Y)(r.B,{componentId:"codegen_mlflow_app_src_model-registry_components_model-list_modellistfilters.tsx_152",type:"tertiary",onClick:()=>{t("")},"data-testid":"models-list-filters-reset",children:(0,u.Y)(d.A,{id:"n/l2ft",defaultMessage:"Reset filters"})})]})}},22156:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var n=a(60312),r=a(49708),o=a(46709),s=a(59795);const l=({queryKey:e})=>{const[,{searchFilter:t,pageToken:a,experimentId:n}]=e;return s.M.listRegisteredPrompts(t,a,n)};var i=a(79081),d=a(82716),c=a(27757),u=a(40724),m=a(7306),g=a(73408);const p=({searchFilter:e,onSearchFilterChange:t,componentId:a})=>(0,g.Y)(d.TableFilterLayout,{children:(0,g.Y)(d.TableFilterInput,{placeholder:"Search prompts by name or tags",componentId:a,value:e,onChange:e=>t(e.target.value),suffix:(0,g.Y)(m._,{exampleEntityName:"my-prompt-name"})})});var f=a(68248),h=a(76256),v=a(90061),y=a(43617),w=a(7655),_=a(181),M=a(59281);var b={name:"zjik7",styles:"display:flex"},k={name:"tyk0n8",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex"},x={name:"14cnl6e",styles:"flex-shrink:0;opacity:0;[role=row]:hover &{opacity:1;}[role=row]:focus-within &{opacity:1;}"};const Y=({row:{original:e},table:{options:{meta:t}}})=>{var a;const n=(0,w.A)(),{onEditTags:r}=t,o=(null===e||void 0===e||null===(a=e.tags)||void 0===a?void 0:a.filter(e=>(0,_.oD)(e.key)))||[],s=o.length>0;return(0,g.FD)("div",{css:b,children:[(0,g.Y)("div",{css:k,children:null===o||void 0===o?void 0:o.map(e=>(0,g.Y)(M.t,{tag:e},e.key))}),(0,g.Y)(c.B,{componentId:"mlflow.prompts.list.tag.add",size:"small",icon:s?(0,g.Y)(d.PencilIcon,{}):void 0,onClick:()=>null===r||void 0===r?void 0:r(e),"aria-label":n.formatMessage({id:"lA8QO2",defaultMessage:"Edit tags"}),children:s?void 0:(0,g.Y)(u.A,{id:"iDpAK8",defaultMessage:"Add tags"}),css:x,type:"tertiary"})]})};var T=a(91105),A=a(60284);const C=({row:{original:e},getValue:t,table:{options:{meta:a}}})=>{const n=t(),{experimentId:r}=a||{};return e.name?(0,g.Y)(T.N_,{to:A.Ay.getPromptDetailsPageRoute(encodeURIComponent(e.name),r),children:n}):n};var I=a(11522);const F=({row:{original:e},getValue:t})=>{const a=t();return a?(0,g.Y)(c.T.Text,{children:(0,g.Y)(u.A,{id:"sM0MBJ",defaultMessage:"Version {version}",values:{version:a}})}):null};var P=a(76118);var S={name:"1h3rtzg",styles:"align-items:center"};const R=({prompts:e,hasNextPage:t,hasPreviousPage:a,isLoading:n,isFiltered:r,onNextPage:s,onPreviousPage:l,onEditTags:i,experimentId:m,paginationComponentId:p,tableHeaderComponentId:_})=>{const{theme:M}=(0,c.u)(),b=(()=>{const e=(0,w.A)();return(0,o.useMemo)(()=>[{header:e.formatMessage({id:"tzA/LZ",defaultMessage:"Name"}),accessorKey:"name",id:"name",cell:C},{header:e.formatMessage({id:"bmd4rb",defaultMessage:"Latest version"}),cell:F,accessorFn:({latest_versions:e})=>{var t;return null===(t=(0,P.first)(e))||void 0===t?void 0:t.version},id:"latestVersion"},{header:e.formatMessage({id:"FiKsFK",defaultMessage:"Last modified"}),id:"lastModified",accessorFn:({last_updated_timestamp:t})=>I.A.formatTimestamp(t,e)},{header:e.formatMessage({id:"KMVqUP",defaultMessage:"Tags"}),accessorKey:"tags",id:"tags",cell:Y}],[e])})(),k=(0,h.L)("mlflow/server/js/src/experiment-tracking/pages/prompts/components/PromptsListTable.tsx",{data:null!==e&&void 0!==e?e:[],columns:b,getCoreRowModel:(0,v.HT)(),getRowId:(e,t)=>{var a;return null!==(a=e.name)&&void 0!==a?a:t.toString()},meta:{onEditTags:i,experimentId:m}});return(0,g.FD)(d.Table,{scrollable:!0,pagination:(0,g.Y)(d.CursorPagination,{hasNextPage:t,hasPreviousPage:a,onNextPage:s,onPreviousPage:l,componentId:p}),empty:(()=>{const t=!n&&(0,P.isEmpty)(e);return t&&r?(0,g.Y)(d.Empty,{image:(0,g.Y)(d.NoIcon,{}),title:(0,g.Y)(u.A,{id:"hlpNRa",defaultMessage:"No prompts found"}),description:null}):t?(0,g.Y)(d.Empty,{title:(0,g.Y)(u.A,{id:"/fwKFW",defaultMessage:"No prompts created"}),description:(0,g.Y)(u.A,{id:"WM5IeI",defaultMessage:'Use "Create prompt" button in order to create a new prompt'})}):null})(),children:[(0,g.Y)(d.TableRow,{isHeader:!0,children:k.getLeafHeaders().map(e=>(0,g.Y)(d.TableHeader,{componentId:_,children:(0,y.Kv)(e.column.columnDef.header,e.getContext())},e.id))}),n?(0,g.Y)(d.TableSkeletonRows,{table:k}):k.getRowModel().rows.map(e=>(0,g.Y)(d.TableRow,{css:(0,f.AH)({height:M.general.buttonHeight},""),children:e.getAllCells().map(e=>(0,g.Y)(d.TableCell,{css:S,children:(0,y.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))]})};var E=a(73227),D=a(60527),V=a(55570),L=a(91113),N=a(68079),H=a(27556);const K={create:"mlflow.prompts.global.list.create",error:"mlflow.prompts.global.list.error",search:"mlflow.prompts.global.list.search",pagination:"mlflow.prompts.global.list.pagination",tableHeader:"mlflow.prompts.global.list.table.header"},B={create:"mlflow.prompts.experiment.list.create",error:"mlflow.prompts.experiment.list.error",search:"mlflow.prompts.experiment.list.search",pagination:"mlflow.prompts.experiment.list.pagination",tableHeader:"mlflow.prompts.experiment.list.table.header"};var W={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},U={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"};var O=(0,V.X)(L.A.mlflowServices.EXPERIMENTS,({experimentId:e}={})=>{const[t,a]=(0,o.useState)(""),s=(0,T.Zp)(),m=e?B:K,[f]=(0,H.d7)(t,500),{data:h,error:v,refetch:y,hasNextPage:w,hasPreviousPage:_,isLoading:M,onNextPage:b,onPreviousPage:k}=(({searchFilter:e,experimentId:t}={})=>{var a,n,s,i;const d=(0,o.useRef)([]),[c,u]=(0,o.useState)(void 0),m=(0,r.I)(["prompts_list",{searchFilter:e,pageToken:c,experimentId:t}],{queryFn:l,retry:!1}),g=(0,o.useCallback)(()=>{var e;d.current.push(c),u(null===(e=m.data)||void 0===e?void 0:e.next_page_token)},[null===(a=m.data)||void 0===a?void 0:a.next_page_token,c]),p=(0,o.useCallback)(()=>{const e=d.current.pop();u(e)},[]);return{data:null===(n=m.data)||void 0===n?void 0:n.registered_models,error:null!==(s=m.error)&&void 0!==s?s:void 0,isLoading:m.isLoading,hasNextPage:void 0!==(null===(i=m.data)||void 0===i?void 0:i.next_page_token),hasPreviousPage:Boolean(c),onNextPage:g,onPreviousPage:p,refetch:m.refetch}})({experimentId:e,searchFilter:f}),{EditTagsModal:x,showEditPromptTagsModal:Y}=(0,E.i)({onSuccess:y}),{CreatePromptModal:C,openModal:I}=(0,D.z)({mode:D.v.CreatePrompt,experimentId:e,onSuccess:({promptName:t})=>s(A.Ay.getPromptDetailsPageRoute(t,e))});return(0,g.FD)(n.m,{css:W,children:[(0,g.Y)(i.S,{shrinks:!1}),(0,g.Y)(d.Header,{title:(0,g.Y)(u.A,{id:"aLRRam",defaultMessage:"Prompts"}),buttons:(0,g.Y)(c.B,{componentId:m.create,type:"primary",onClick:I,children:(0,g.Y)(u.A,{id:"7x6xu8",defaultMessage:"Create prompt"})})}),(0,g.Y)(i.S,{shrinks:!1}),(0,g.FD)("div",{css:U,children:[(0,g.Y)(p,{searchFilter:t,onSearchFilterChange:a,componentId:m.search}),(null===v||void 0===v?void 0:v.message)&&(0,g.FD)(g.FK,{children:[(0,g.Y)(d.Alert,{type:"error",message:v.message,componentId:m.error,closable:!1}),(0,g.Y)(i.S,{})]}),(0,g.Y)(R,{prompts:h,error:v,hasNextPage:w,hasPreviousPage:_,isLoading:M,isFiltered:Boolean(t),onNextPage:b,onPreviousPage:k,onEditTags:Y,experimentId:e,paginationComponentId:m.pagination,tableHeaderComponentId:m.tableHeader})]}),x,C]})},void 0,N.u)},27042:function(e,t,a){a.d(t,{Q:function(){return b}});var n=a(68248),r=a(76118),o=a(46709),s=a(27757),l=a(79081),i=a(82716),d=a(7655),c=a(40724),u=a(884),m=a(73408);var g={name:"4zleql",styles:"display:block"};function p(e){return t=>function(e,t){const a=(0,d.A)(),{theme:c}=(0,s.u)(),u=e.props.searchValue.toLowerCase();return(0,o.useMemo)(()=>{if(!u)return e;if((0,r.sortedIndexOf)(t,u)>=0)return e;const s=/^[^,.:/=\-\s]+$/.test(u);return o.cloneElement(e,{flattenOptions:[{data:{value:u,disabled:!s,style:{color:s?c.colors.actionTertiaryTextDefault:c.colors.actionDisabledText},children:(0,m.Y)(l.T,{content:s?void 0:a.formatMessage({id:"fWEvZL",defaultMessage:", . : / - = and blank spaces are not allowed"}),componentId:"mlflow.common.components.tag-select-dropdown.add-new-tag-tooltip",side:"right",children:(0,m.FD)("span",{css:g,children:[(0,m.Y)(i.PlusIcon,{css:(0,n.AH)({marginRight:c.spacing.sm},"")}),a.formatMessage({id:"IJbauF",defaultMessage:'Add tag "{tagKey}"'},{tagKey:u})]})})},key:u,groupOption:!1},...e.props.flattenOptions]})},[t,e,u,a,c])}(t,e)}var f={name:"1d3w5wq",styles:"width:100%"};function h({allAvailableTags:e,control:t,onKeyChangeCallback:a}){const n=(0,d.A)(),[r,s]=(0,o.useState)(!1),l=(0,o.useRef)(null),{field:c,fieldState:g}=(0,u.as)({control:t,name:"key",rules:{required:{message:n.formatMessage({id:"RlBbjb",defaultMessage:"A tag key is required"}),value:!0}}});return(0,m.Y)(i.LegacySelect,{allowClear:!0,ref:l,dangerouslySetAntdProps:{showSearch:!0,dropdownRender:p(e)},css:f,placeholder:n.formatMessage({id:"8ALhnh",defaultMessage:"Type a key"}),value:c.value,defaultValue:c.value,open:r,onDropdownVisibleChange:e=>{s(e)},filterOption:(e,t)=>null===t||void 0===t?void 0:t.value.toLowerCase().includes(e.toLowerCase()),onSelect:e=>{c.onChange(e),null===a||void 0===a||a(e)},onClear:()=>{c.onChange(void 0),null===a||void 0===a||a(void 0)},validationState:g.error?"error":void 0,children:e.map(e=>(0,m.Y)(i.LegacySelect.Option,{value:e,children:e},e))})}var v=a(59281),y=a(77153);function w(e){return new Map(e.map(e=>[e.key,e]))}var _={name:"82a6rk",styles:"flex:1"},M={name:"82a6rk",styles:"flex:1"};const b=({onSuccess:e,saveTagsHandler:t,allAvailableTags:a,valueRequired:g=!1,title:p})=>{const f=(0,o.useRef)(),[b,k]=(0,o.useState)(""),{theme:Y}=(0,s.u)(),[T,A]=(0,o.useState)(new Map),[C,I]=(0,o.useState)(new Map),[F,P]=(0,o.useState)(!1),S=(0,u.mN)({defaultValues:{key:void 0,value:""}}),R=()=>P(!1),E=(0,o.useCallback)(e=>{f.current=e,A(w(e.tags||[])),I(w(e.tags||[])),S.reset(),P(!0)},[S]),D=async()=>{f.current&&(k(""),H(!0),t(f.current,Array.from(T.values()),Array.from(C.values())).then(()=>{R(),null===e||void 0===e||e(),H(!1)}).catch(e=>{var t;H(!1),k(e instanceof y.s?null===(t=e.getUserVisibleError())||void 0===t?void 0:t.message:e.message)}))},V=(0,d.A)(),L=S.watch(),[N,H]=(0,o.useState)(!1),K=(0,o.useMemo)(()=>!(0,r.isEqual)((0,r.sortBy)(Array.from(T.values()),"key"),(0,r.sortBy)(Array.from(C.values()),"key")),[T,C]),B=L.key||L.value,W=K&&B;return{EditTagsModal:(0,m.FD)(l.d,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_135",destroyOnClose:!0,visible:F,title:null!==p&&void 0!==p?p:(0,m.Y)(c.A,{id:"TBX+Gs",defaultMessage:"Add/Edit tags"}),onCancel:R,footer:(0,m.FD)(s.x,{children:[(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147",dangerouslyUseFocusPseudoClass:!0,onClick:R,css:(0,n.AH)({marginRight:K?0:Y.spacing.sm},""),children:V.formatMessage({id:"2a/rR8",defaultMessage:"Cancel"})}),W?(0,m.Y)(x,{formValues:L,isLoading:N,onSaveTask:D}):(0,m.Y)(l.T,{content:K?void 0:V.formatMessage({id:"16onEc",defaultMessage:"Please add or remove one or more tags before saving"}),componentId:"mlflow.common.hooks.useeditkeyvaluetagsmodal.tooltip",children:(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174",dangerouslyUseFocusPseudoClass:!0,disabled:!K,loading:N,type:"primary",onClick:D,children:V.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})})]}),children:[(0,m.FD)("form",{onSubmit:S.handleSubmit(()=>{if(g&&!L.value.trim())return;const e=new Map(C);e.set(L.key,L),I(e),S.reset()}),css:(0,n.AH)({display:"flex",alignItems:"flex-end",gap:Y.spacing.md},""),children:[(0,m.FD)("div",{css:(0,n.AH)({minWidth:0,display:"flex",gap:Y.spacing.md,flex:1},""),children:[(0,m.FD)("div",{css:_,children:[(0,m.Y)(i.FormUI.Label,{htmlFor:"key",children:V.formatMessage({id:"crTWax",defaultMessage:"Key"})}),(0,m.Y)(h,{allAvailableTags:a||[],control:S.control,onKeyChangeCallback:e=>{var t;const a=e?C.get(e):void 0;S.setValue("value",null!==(t=null===a||void 0===a?void 0:a.value)&&void 0!==t?t:"")}})]}),(0,m.FD)("div",{css:M,children:[(0,m.Y)(i.FormUI.Label,{htmlFor:"value",children:g?V.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):V.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"})}),(0,m.Y)(i.RHFControlledComponents.Input,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_223",name:"value",control:S.control,"aria-label":g?V.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):V.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"}),placeholder:V.formatMessage({id:"FFe+Ug",defaultMessage:"Type a value"})})]})]}),(0,m.Y)(l.T,{content:V.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),componentId:"mlflow.common.hooks.useeditkeyvaluetagsmodal.add-tag-tooltip",children:(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248",htmlType:"submit","aria-label":V.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,m.Y)(i.PlusIcon,{})})})]}),b&&(0,m.Y)(i.FormUI.Message,{type:"error",message:b}),(0,m.Y)("div",{css:(0,n.AH)({display:"flex",rowGap:Y.spacing.xs,flexWrap:"wrap",marginTop:Y.spacing.sm},""),children:Array.from(C.values()).map(e=>(0,m.Y)(v.t,{isClosable:!0,tag:e,onClose:()=>(({key:e})=>{I(t=>(t.delete(e),new Map(t)))})(e)},e.key))})]}),showEditTagsModal:E,isLoading:N}};var k={name:"1y0ex1",styles:"max-width:400px"};function x({isLoading:e,formValues:t,onSaveTask:a}){const o=(0,d.A)(),{theme:l}=(0,s.u)(),i=`${`${(0,r.truncate)(t.key,{length:20})||"_"}`}${t.value?`:${(0,r.truncate)(t.value,{length:20})}`:""}`,c=o.formatMessage({id:"wcSVYI",defaultMessage:'Are you sure you want to save and close without adding "{tag}"'},{tag:i});return(0,m.FD)(s.aw.Root,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_309",children:[(0,m.Y)(s.aw.Trigger,{asChild:!0,children:(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306",dangerouslyUseFocusPseudoClass:!0,loading:e,type:"primary",children:o.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})}),(0,m.FD)(s.aw.Content,{align:"end","aria-label":c,children:[(0,m.Y)(s.T.Paragraph,{css:k,children:c}),(0,m.Y)(s.aw.Close,{asChild:!0,children:(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316",onClick:a,children:o.formatMessage({id:"mv6CY3",defaultMessage:"Yes, save and close"})})}),(0,m.Y)(s.aw.Close,{asChild:!0,children:(0,m.Y)(s.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324",type:"primary",css:(0,n.AH)({marginLeft:l.spacing.sm},""),children:o.formatMessage({id:"geizp1",defaultMessage:"Cancel"})})}),(0,m.Y)(s.aw.Arrow,{})]})]})}},27556:function(e,t,a){a.d(t,{YQ:function(){return r},d7:function(){return s}});var n=a(46709);function r(e,t,a){var r=this,o=(0,n.useRef)(null),s=(0,n.useRef)(0),l=(0,n.useRef)(null),i=(0,n.useRef)([]),d=(0,n.useRef)(),c=(0,n.useRef)(),u=(0,n.useRef)(e),m=(0,n.useRef)(!0);u.current=e;var g="undefined"!=typeof window,p=!t&&0!==t&&g;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var f=!!(a=a||{}).leading,h=!("trailing"in a)||!!a.trailing,v="maxWait"in a,y="debounceOnServer"in a&&!!a.debounceOnServer,w=v?Math.max(+a.maxWait||0,t):null;(0,n.useEffect)(function(){return m.current=!0,function(){m.current=!1}},[]);var _=(0,n.useMemo)(function(){var e=function(e){var t=i.current,a=d.current;return i.current=d.current=null,s.current=e,c.current=u.current.apply(a,t)},a=function(e,t){p&&cancelAnimationFrame(l.current),l.current=p?requestAnimationFrame(e):setTimeout(e,t)},n=function(e){if(!m.current)return!1;var a=e-o.current;return!o.current||a>=t||a<0||v&&e-s.current>=w},_=function(t){return l.current=null,h&&i.current?e(t):(i.current=d.current=null,c.current)},M=function e(){var r=Date.now();if(n(r))return _(r);if(m.current){var l=t-(r-o.current),i=v?Math.min(l,w-(r-s.current)):l;a(e,i)}},b=function(){if(g||y){var u=Date.now(),p=n(u);if(i.current=[].slice.call(arguments),d.current=r,o.current=u,p){if(!l.current&&m.current)return s.current=o.current,a(M,t),f?e(o.current):c.current;if(v)return a(M,t),e(o.current)}return l.current||a(M,t),c.current}};return b.cancel=function(){l.current&&(p?cancelAnimationFrame(l.current):clearTimeout(l.current)),s.current=0,i.current=o.current=d.current=l.current=null},b.isPending=function(){return!!l.current},b.flush=function(){return l.current?_(Date.now()):c.current},b},[f,v,t,w,h,p,g,y]);return _}function o(e,t){return e===t}function s(e,t,a){var s=a&&a.equalityFn||o,l=(0,n.useRef)(e),i=(0,n.useState)({})[1],d=r((0,n.useCallback)(function(e){l.current=e,i({})},[i]),t,a),c=(0,n.useRef)(e);return s(c.current,e)||(d(e),c.current=e),[l.current,d]}},59281:function(e,t,a){a.d(t,{t:function(){return h}});var n=a(68248),r=a(82716),o=a(79081),s=a(27757),l=a(46709),i=a(7655),d=a(91701),c=a(73408);const{Paragraph:u}=s.T;var m={name:"zjik7",styles:"display:flex"},g={name:"1ff36h2",styles:"flex-grow:1"};const p=l.memo(e=>{const{theme:t}=(0,s.u)();return(0,c.Y)(o.d,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17",title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:m,children:[(0,c.Y)(u,{css:g,children:(0,c.Y)("pre",{css:(0,n.AH)({backgroundColor:t.colors.backgroundPrimary,marginTop:t.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,n.AH)({marginTop:t.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(r.CopyIcon,{}),"aria-label":"Copy"})})]})})});function f(e=!0){return e?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const h=({isClosable:e=!1,onClose:t,tag:a,enableFullViewModal:d=!1,charLimit:u=30,maxWidth:m=300,className:g})=>{const h=(0,i.A)(),[v,y]=(0,l.useState)(!1),{shouldTruncateKey:w,shouldTruncateValue:_}=function(e,t=30){const{key:a,value:n}=e,r=a.length+n.length,o=a.length>n.length,s=o?n.length:a.length;return r<=t?{shouldTruncateKey:!1,shouldTruncateValue:!1}:s>t/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:o,shouldTruncateValue:!o}}(a,u),M=d&&(w||_),b=h.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(r.Tag,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60",closable:e,onClose:t,title:a.key,className:g,children:(0,c.Y)(o.T,{content:M?b:"",componentId:"mlflow.common.components.key-value-tag.tooltip",children:(0,c.FD)("span",{css:(0,n.AH)({maxWidth:m,display:"inline-flex"},""),onClick:()=>M?y(!0):void 0,children:[(0,c.Y)(s.T.Text,{bold:!0,title:a.key,css:f(w),children:a.key}),a.value&&(0,c.FD)(s.T.Text,{title:a.value,css:f(_),children:[": ",a.value]})]})})}),(0,c.Y)("div",{children:v&&(0,c.Y)(p,{tagKey:a.key,tagValue:a.value,isKeyValueTagFullViewModalVisible:v,setIsKeyValueTagFullViewModalVisible:y})})]})}},60312:function(e,t,a){a.d(t,{m:function(){return s}});var n=a(82716),r=a(73408);var o={name:"13udsys",styles:"height:100%"};const s=({children:e,className:t})=>(0,r.Y)(n.PageWrapper,{css:o,className:t,children:e})},68079:function(e,t,a){a.d(t,{u:function(){return d}});var n=a(82716),r=a(27757),o=a(40724),s=a(60312),l=a(73408);var i={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const d=({error:e})=>{var t;return(0,l.Y)(s.m,{css:i,children:(0,l.Y)(n.Empty,{"data-testid":"fallback",title:(0,l.Y)(o.A,{id:"AOoWxS",defaultMessage:"Error"}),description:null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:(0,l.Y)(o.A,{id:"zmMR5p",defaultMessage:"An error occurred while rendering this component."}),image:(0,l.Y)(r.k,{})})})}},73227:function(e,t,a){a.d(t,{i:function(){return i}});var n=a(61060),r=a(27042),o=a(59795),s=a(46709),l=a(181);const i=({onSuccess:e})=>{const t=(0,n.n)({mutationFn:async({toAdd:e,toDelete:t,promptId:a})=>Promise.all([...e.map(({key:e,value:t})=>o.M.setRegisteredPromptTag(a,e,t)),...t.map(({key:e})=>o.M.deleteRegisteredPromptTag(a,e))])}),{EditTagsModal:a,showEditTagsModal:i,isLoading:d}=(0,r.Q)({valueRequired:!0,saveTagsHandler:(a,n,r)=>{const{addedOrModifiedTags:o,deletedTags:s}=(0,l.Rf)(n,r);return new Promise((n,r)=>{if(!a.name)return r();t.mutate({promptId:a.name,toAdd:o,toDelete:s},{onSuccess:()=>{n(),null===e||void 0===e||e()},onError:r})})}});return{EditTagsModal:a,showEditPromptTagsModal:(0,s.useCallback)(e=>i({name:e.name,tags:e.tags.filter(e=>(0,l.oD)(e.key))}),[i]),isLoading:d}}},76256:function(e,t,a){a.d(t,{L:function(){return r},S:function(){return o}});var n=a(43617);function r(e,t){return(0,n.N4)(t)}const o=n.N4}}]);